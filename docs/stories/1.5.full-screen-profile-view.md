# Story 1.5: Full Screen Profile View

## Status
InProgress

## Story
**As a** user,
**I want** to view a complete detailed profile in full screen mode,
**so that** I can see all available information about a person including their personal details, skills, experiences, and interests

## Acceptance Criteria
1. Display complete profile information in a dedicated full-screen page
2. Show all profile sections: basic info, skills, interests, teams, projects, personal details
3. Organize information in a visually appealing and scannable layout
4. Support different visibility contexts (what user has chosen to share)
5. Include navigation back to previous view (card/list/modal)
6. Make profile information shareable via URL
7. Responsive design that works across all device sizes
8. Show profile completeness indicator and suggestions for improvement

## Tasks / Subtasks
- [ ] Task 1: Create full screen profile page structure (AC: 1, 5, 6)
  - [ ] Create pages/profiles/[userId].tsx with dynamic routing
  - [ ] Implement navigation breadcrumbs and back button
  - [ ] Add URL-based profile sharing functionality
- [ ] Task 2: Design comprehensive profile layout (AC: 2, 3)
  - [ ] Create hero section with photo, name, title
  - [ ] Design skills section with categorization
  - [ ] Layout personal information sections
  - [ ] Add teams and projects displays
- [ ] Task 3: Implement visibility context handling (AC: 4)
  - [ ] Apply user privacy settings from database
  - [ ] Show appropriate information based on viewer context
  - [ ] Handle organization-specific profile versions
- [ ] Task 4: Create profile sections components (AC: 2, 7)
  - [ ] ProfileHero: Main profile information
  - [ ] SkillsSection: Categorized skills display
  - [ ] PersonalSection: Interests, hobbies, activities
  - [ ] ExperienceSection: Teams and projects
  - [ ] ContactSection: Contact information (if visible)
- [ ] Task 5: Add profile completeness features (AC: 8)
  - [ ] Calculate profile completion percentage
  - [ ] Show missing information suggestions
  - [ ] Add "complete your profile" prompts
- [ ] Task 6: Implement responsive full-screen design (AC: 7)
  - [ ] Desktop: multi-column layout
  - [ ] Tablet: two-column responsive layout
  - [ ] Mobile: single column with collapsible sections
- [ ] Task 7: Add comprehensive testing and optimization (AC: All)
  - [ ] Test dynamic routing and profile loading
  - [ ] Test visibility rules and privacy settings
  - [ ] Test responsive layout across devices
  - [ ] Optimize loading performance

## Dev Notes

### Previous Story Insights
Stories 1.1-1.4 established profile data structure, different view modes (card, list, modal), and selection functionality. The full screen view should integrate with navigation from all previous views and provide the most comprehensive profile display.

### Data Models
**Complete User Profile Data** [Source: architecture/2-データベース設計柔軟な公開範囲管理例.md]:
```
/users/{userId}
  - core: { name, photoUrl, mainTitle, teamIds, mainSkills }
  - personal: { 
      hobbies, favorites, learning, motto, activities, customFields,
      show: { hobbies: { org1: true, org2: false, all: true }, ... }
    }
  - profiles: { orgId1: { ... }, orgId2: { ... } }
```

Full screen view needs access to all profile data, with visibility filtering based on the `show` settings and current organizational context.

**Related Data Models**:
```
/organizations/{orgId}: { name, admins, members, orgProfileTemplate, teams, projects }
/skills/{skillId}: { name, synonyms, orgIds }
/teams, /projects: Referenced by user profile data
```

### API Specifications
**Profile Loading Strategy**:
- Server-side rendering for better SEO and performance using Next.js `getStaticProps` or `getServerSideProps`
- Dynamic route: `/profiles/[userId]`
- Fetch complete user data with organization context
- Load related team and project information
- Apply visibility rules server-side when possible

### Component Specifications
**ProfilePage Layout**:
- Hero section: Large photo, name, title, contact actions
- Skills section: Organized by categories with proficiency levels
- Personal section: Interests, learning goals, motto
- Experience section: Teams, projects, achievements
- Activity section: Recent activities, contributions

**Section Components**:
- Collapsible sections for better mobile experience
- Progressive disclosure of detailed information
- Interactive elements (skill tags, team links)
- Share and contact action buttons

### File Locations
**Project Structure** building on previous stories:
- `pages/profiles/[userId].tsx` - Dynamic profile page
- `components/profile/ProfilePage.tsx` - Main profile layout
- `components/profile/ProfileHero.tsx` - Hero section
- `components/profile/SkillsSection.tsx` - Skills display
- `components/profile/PersonalSection.tsx` - Personal information
- `components/profile/ExperienceSection.tsx` - Teams and projects
- `components/profile/ProfileCompleteness.tsx` - Completion indicator
- `components/common/BackNavigation.tsx` - Navigation component
- `utils/profileVisibility.ts` - Visibility rule handling
- `utils/profileCompletion.ts` - Completion calculation

### Testing Requirements
**Full Screen View Testing**:
- Test dynamic routing and profile parameter handling
- Test complete profile data loading and display
- Test visibility rules for different user contexts
- Test responsive layout behavior
- Test navigation and back button functionality
- Test profile sharing URLs

### Technical Constraints
**Performance Optimization** [Source: architecture/1-システム全体像.md]:
- Implement Next.js Static Site Generation (SSG) where possible
- Use Next.js Image optimization for profile photos
- Implement lazy loading for non-critical profile sections
- Add skeleton loading states for better perceived performance
- Consider caching strategies for frequently viewed profiles

**SEO and Social Sharing**:
- Add proper meta tags for profile sharing
- Implement Open Graph tags for social media
- Add structured data for better search engine understanding
- Generate dynamic page titles and descriptions

**Privacy and Security** [Source: architecture/4-セキュリティ・認可設計.md]:
- Implement proper authentication checks
- Respect user privacy settings and visibility rules
- Handle private profiles and access restrictions
- Add audit logging for profile views

## Testing
**Test file locations**: Adjacent to components with `.test.tsx` extension
**Testing frameworks**: Jest and React Testing Library (consistent with previous stories)
**Specific requirements for this story**:
- Test dynamic routing with various userId parameters
- Test complete profile data rendering with different visibility settings
- Test responsive layout behavior across all device sizes
- Test navigation and back button functionality
- Test profile sharing URL generation and handling
- Test profile completeness calculation and suggestions
- Integration testing with authentication and authorization

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| [Current Date] | 1.0 | Initial story creation | Scrum Master (Bob) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent review will be added here after story completion*